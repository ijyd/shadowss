
- hosts: localhost
  roles:
    - { role: docker-publish, name: bjjyd/vpskeeper, tag: latest, repo: dockerhub.bj-jyd.cn/library/vpskeeper }
    - { role: docker-publish, name: bjjyd/etcd, tag: v3.0.12, repo: dockerhub.bj-jyd.cn/library/etcd }

- hosts: cloud
  remote_user: root

  tasks:
    - name: Wait for port 22 to become available
      local_action: "wait_for port=22 host={{ inventory_hostname }}"
  roles:
    - { role: docker-pull, name: bjjyd/vpskeeper, tag: latest, repo: dockerhub.bj-jyd.cn/library/vpskeeper }
    - { role: docker-pull, name: bjjyd/etcd, tag: v3.0.12, repo: dockerhub.bj-jyd.cn/library/etcd}
